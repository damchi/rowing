<div class="row">
  <div class="col-md-3">
    <div
      class="card"
      mwlDroppable
      (drop)="externalDrop($event.dropData.event)"
      dragOverClass="drag-over"
    >

      <div class="card-body">
<!--        <p *ngIf="externalEvents.length === 0"><em>No events added</em></p>       -->
        <p *ngIf="trainings.length === 0"><em>No events added</em></p>
        <ul>
<!--          <li-->
<!--            *ngFor="let event of externalEvents"-->
<!--            mwlDraggable-->
<!--            [dropData]="{event: event}"-->
<!--            dragActiveClass="drag-active"-->
<!--          >-->
          <li
            *ngFor="let event of trainings"
            mwlDraggable
            [dropData]="{event: event}"
            dragActiveClass="drag-active"
          >
            <a href="javascript:;" [style.color]="event.color.primary">
              {{ event.title }}
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>

<!--  <div class="col-md-9">-->
<!--    <app-calendar-header [(view)]="view" [(viewDate)]="viewDate">-->
<!--    </app-calendar-header>-->

<!--    <ng-template #customCellTemplate let-day="day" let-locale="locale">-->
<!--      <div class="cal-cell-top">-->
<!--    <span class="cal-day-badge" *ngIf="day.badgeTotal > 0"-->
<!--    >{{ day.badgeTotal }}</span-->
<!--    >-->
<!--        <span class="cal-day-number"-->
<!--        >{{ day.date | calendarDate:'monthViewDayNumber':locale }}</span-->
<!--        >-->
<!--      </div>-->
<!--&lt;!&ndash;      <small style="margin: 5px"&ndash;&gt;-->
<!--&lt;!&ndash;      >There are {{ day.events.length }} events on this day</small&ndash;&gt;-->
<!--&lt;!&ndash;      >&ndash;&gt;-->
<!--    </ng-template>-->

<!--    <div [ngSwitch]="view">-->
<!--      <mwl-calendar-month-view-->
<!--        *ngSwitchCase="CalendarView.Month"-->
<!--        [viewDate]="viewDate"-->
<!--        [events]="events"-->
<!--        [activeDayIsOpen]="false"-->
<!--        [refresh]="refresh"-->
<!--        (eventTimesChanged)="eventDropped($event)"-->
<!--        [cellTemplate]="customCellTemplate"-->

<!--      >-->
<!--      </mwl-calendar-month-view>-->
<!--      <mwl-calendar-week-view-->
<!--        *ngSwitchCase="CalendarView.Week"-->
<!--        [viewDate]="viewDate"-->
<!--        [events]="events"-->
<!--        [refresh]="refresh"-->
<!--        [snapDraggedEvents]="false"-->
<!--        (eventTimesChanged)="eventDropped($event)"-->
<!--      >-->
<!--      </mwl-calendar-week-view>-->
<!--      <mwl-calendar-day-view-->
<!--        *ngSwitchCase="CalendarView.Day"-->
<!--        [viewDate]="viewDate"-->
<!--        [events]="events"-->
<!--        [refresh]="refresh"-->
<!--        [snapDraggedEvents]="false"-->
<!--        (eventTimesChanged)="eventDropped($event)"-->
<!--      >-->
<!--      </mwl-calendar-day-view>-->
<!--    </div>-->
<!--  </div>-->
<!--</div>-->


<!--  <ng-template #modalContent let-close="close">-->
<!--  <div class="modal-header">-->
<!--    <h5 class="modal-title">Event action occurred</h5>-->
<!--    <button type="button" class="close" (click)="close()">-->
<!--      <span aria-hidden="true">&times;</span>-->
<!--    </button>-->
<!--  </div>-->
<!--  <div class="modal-body">-->
<!--    <div>-->
<!--      Action:-->
<!--      <pre>{{ modalData?.action }}</pre>-->
<!--    </div>-->
<!--    <div>-->
<!--      Event:-->
<!--      <pre>{{ modalData?.event.title  }}</pre>-->
<!--    </div>-->
<!--  </div>-->
<!--  <div class="modal-footer">-->
<!--    <button type="button" class="btn btn-outline-secondary" (click)="close()">-->
<!--      OK-->
<!--    </button>-->
<!--  </div>-->
<!--  </ng-template>-->



<!--  <div class="col-md-9">-->
<!--  <app-calendar-header [(view)]="view" [(viewDate)]="viewDate">&ndash;&gt;-->
<!--        </app-calendar-header>-->
<!--<div [ngSwitch]="view">-->
<!--  <mwl-calendar-month-view-->
<!--    *ngSwitchCase="CalendarView.Month"-->
<!--    [viewDate]="viewDate"-->
<!--    [events]="events"-->
<!--    [refresh]="refresh"-->
<!--    [activeDayIsOpen]="activeDayIsOpen"-->
<!--    (dayClicked)="dayClicked($event.day)"-->
<!--    (eventClicked)="handleEvent('Clicked', $event.event)"-->
<!--    (eventTimesChanged)="eventDropped($event)"-->

<!--  >-->
<!--  </mwl-calendar-month-view>-->
<!--  <mwl-calendar-week-view-->
<!--    *ngSwitchCase="CalendarView.Week"-->
<!--    [viewDate]="viewDate"-->
<!--    [events]="events"-->
<!--    [refresh]="refresh"-->
<!--    (eventClicked)="handleEvent('Clicked', $event.event)"-->
<!--    (eventTimesChanged)="eventTimesChanged($event)"-->
<!--  >-->
<!--  </mwl-calendar-week-view>-->
<!--  <mwl-calendar-day-view-->
<!--    *ngSwitchCase="CalendarView.Day"-->
<!--    [viewDate]="viewDate"-->
<!--    [events]="events"-->
<!--    [refresh]="refresh"-->
<!--    (eventClicked)="handleEvent('Clicked', $event.event)"-->
<!--    (eventTimesChanged)="eventTimesChanged($event)"-->
<!--  >-->
<!--  </mwl-calendar-day-view>-->
<!--</div>-->
<!--  </div>-->








  <app-calendar-header
    [(view)]="view"
    [(viewDate)]="viewDate"
    (viewDateChange)="fetchEvents()"
    (viewChange)="fetchEvents()"
  >
  </app-calendar-header>

  <ng-template #loading>
    <div class="text-center">
      <i class="fa fa-spin fa-spinner fa-5x"></i> <br />
      Loading events...
    </div>
  </ng-template>

  <div *ngIf="events | async; else loading; let events">
    <div [ngSwitch]="view">
      <mwl-calendar-month-view
        *ngSwitchCase="'month'"
        [viewDate]="viewDate"
        [events]="events"
        [activeDayIsOpen]="activeDayIsOpen"
        (dayClicked)="dayClicked($event.day)"
        (eventClicked)="eventClicked($event.event)"
      >
      </mwl-calendar-month-view>
      <mwl-calendar-week-view
        *ngSwitchCase="'week'"
        [viewDate]="viewDate"
        [events]="events"
        (eventClicked)="eventClicked($event.event)"
      >
      </mwl-calendar-week-view>
      <mwl-calendar-day-view
        *ngSwitchCase="'day'"
        [viewDate]="viewDate"
        [events]="events"
        (eventClicked)="eventClicked($event.event)"
      >
      </mwl-calendar-day-view>
    </div>
  </div>
